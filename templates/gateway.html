{% extends 'base.html' %}

{% block title %}Gateway{% endblock title %}

{% block content %}

    {% if user.is_authenticated %}

        Hi {{ user.username }}!

        {% if user.role == "warmupper" %}

            <a href="{% url 'w-assigned-email-addresses' %}">Assigned Email Addresses</a>
            <a href="{% url 'w-email-engagement-and-renumeration' %}">Email Engagement & Renumeration</a>

        {% elif user.role == "manager" %}

            <a href="{% url 'm-register-new-user' %}">Register New User</a>
            <a href="{% url 'm-assign-email-addresses-to-warmupper' %}">Assign Email Addresses To Warmupper</a>
            <a href="{% url 'm-calculate-warmupper-email-engagement' %}">Calculate Warmupper Email Engagement</a>
            <a href="{% url 'm-warmupper-email-engagement-and-renumeration' %}">Warmupper Email Engagement And Renumeration</a>

            <ul>
                {% for action in manager_actions %}
                    <li>Approve or reject <i>{{ action.action_details.name }}</i> for {{ action.action_details.sender.username }}.</li>
                    <button class="actionacceptbutton" data-action-id="{{action.id}}" style="background-color: {% if action.status == 'accepted' %}green{% endif %}">Accept</button>
                    <button class="actionrejectbutton" data-action-id="{{action.id}}" style="background-color: {% if action.status == 'rejected' %}red{% endif %}">Reject</button>
                    <input type="text" placeholder="comment" name="commentfield" class="commentfield" data-action-id="{{action.id}}" value="{{action.comment}}">
                    <button type="submit" class="commentsubmitbutton" data-action-id={{action.id}}>Submit</button>
                    <br><br>
                {% endfor %}
            </ul>


        {% elif user.role == "sender" %}

            <a href="{% url 's-create-email-list' %}">Create Email List</a>
            
            <ul>
                {% for email_list in this_users_email_lists %}
                    <li>{{ email_list }}</li>
                {% endfor %}
            </ul>



        {% endif %}

        <p><a href="{% url 'logout' %}">Log Out</a></p>

    {% else %}

        <p>You are not logged in.</p>
        <a href="{% url 'login' %}">Log In</a><br>
    {% endif %}

{% endblock content %}